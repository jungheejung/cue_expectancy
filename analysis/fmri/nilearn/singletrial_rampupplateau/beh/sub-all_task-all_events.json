{
    "code": "scripts/step10_nilearn/singletrialLSS/move_beh_badjson.py",
    "description": "The provided code is a script that processes behavioral data files located in a specific directory. It reads and processes each file, extracting relevant information, updating columns based on specific conditions, and concatenating the data into a single output file. The script also performs quality control checks, such as verifying if reaction times (RT) are realistic, and filters out invalid data based on certain criteria. Finally, it saves the processed data into a TSV file and a QC summary into another TSV file.\n\nThe provided code is a script that processes behavioral data files located in a specified directory. The script performs the following steps:\n\n1. **Setup Paths and Initialize Data Structures**:\n\n2. **Define Utility Functions**:\n    - `extract_metadata(filename)`: Extracts subject (`sub`), session (`ses`), run (`run`), and run type (`runtype`) from the filename using a regex pattern.\n    - `read_file(file_path)`: Reads a TSV file into a DataFrame, handling both tab-separated and comma-separated formats.\n    - `update_columns(row)`: Updates columns based on specific conditions to handle unrealistic reaction times (`RT`).\n\n3. **Iterate Over Files and Process Data**:\n    - Walk through the directory structure, filtering directories and files.\n    - Read each file and extract `expectrating` or `outcomerating`.\n    \n4. **Quality Control (QC) Checks**:\n    - Verify if reaction times (`RT`) are realistic by checking if values are less than 0.5 seconds, and mark these trials as `n/a`.\n    - Ensure that each run has at least 10 valid trials and the variance of `outcomerating_impute` is at least 0.1.\n    - If criteria are not met, mark the run as invalid.\n\n5. **Concatenate and Save Data**:"
}